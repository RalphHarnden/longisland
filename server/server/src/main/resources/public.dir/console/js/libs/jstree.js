/*!
 * jsTree 1.0-rc3
 * http://jstree.com/
 *
 * Copyright (c) 2010 Ivan Bozhanov (vakata.com)
 *
 * Licensed same as jquery - under the terms of either the MIT License or the GPL Version 2 License
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * $Date: 2011-02-09 01:17:14 +0200 (??, 09 ???? 2011) $
 * $Revision: 236 $
 */
(function(){if(!jQuery||!jQuery.jstree){var n=!1;(function(d){d.vakata={};d.vakata.css={get_css:function(a,i,k){var a=a.toLowerCase(),c=k.cssRules||k.rules,b=0;do{if(c.length&&b>c.length+5)break;if(c[b].selectorText&&c[b].selectorText.toLowerCase()==a)return!0===i?(k.removeRule&&k.removeRule(b),k.deleteRule&&k.deleteRule(b),!0):c[b]}while(c[++b]);return!1},add_css:function(a,c){if(d.jstree.css.get_css(a,!1,c))return!1;c.insertRule?c.insertRule(a+" { }",0):c.addRule(a,null,0);return d.vakata.css.get_css(a)}, remove_css:function(a,c){return d.vakata.css.get_css(a,!0,c)},add_sheet:function(a){var c=!1,k=!0;if(a.str)return a.title&&(c=d("style[id='"+a.title+"-stylesheet']")[0]),c?k=!1:(c=document.createElement("style"),c.setAttribute("type","text/css"),a.title&&c.setAttribute("id",a.title+"-stylesheet")),c.styleSheet?k?(document.getElementsByTagName("head")[0].appendChild(c),c.styleSheet.cssText=a.str):c.styleSheet.cssText=c.styleSheet.cssText+" "+a.str:(c.appendChild(document.createTextNode(a.str)),document.getElementsByTagName("head")[0].appendChild(c)), c.sheet||c.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(b){}else return c=document.createElement("link"),c.rel="stylesheet",c.type="text/css",c.media="all",c.href=a.url,document.getElementsByTagName("head")[0].appendChild(c),c.styleSheet}};var c=[],f=-1,h={},b={};d.fn.jstree=function(a){var b="string"==typeof a,k=Array.prototype.slice.call(arguments,1),g=this;if(b){if("_"==a.substring(0,1))return g;this.each(function(){var b=c[d.data(this,"jstree_instance_id")], b=b&&d.isFunction(b[a])?b[a].apply(b,k):b;if("undefined"!==typeof b&&(0===a.indexOf("is_")||!0!==b&&!1!==b))return g=b,!1})}else this.each(function(){var b=d.data(this,"jstree_instance_id"),e=[],i=a?d.extend({},!0,a):{},g=d(this),f=!1,o=[],e=e.concat(k);g.data("jstree")&&e.push(g.data("jstree"));i=e.length?d.extend.apply(null,[!0,i].concat(e)):i;"undefined"!==typeof b&&c[b]&&c[b].destroy();b=parseInt(c.push({}),10)-1;d.data(this,"jstree_instance_id",b);i.plugins=d.isArray(i.plugins)?i.plugins:d.jstree.defaults.plugins.slice(); i.plugins.unshift("core");i.plugins=i.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");f=d.extend(!0,{},d.jstree.defaults,i);f.plugins=i.plugins;d.each(h,function(a){-1===d.inArray(a,f.plugins)?(f[a]=null,delete f[a]):o.push(a)});f.plugins=o;c[b]=new d.jstree._instance(b,d(this).addClass("jstree jstree-"+b),f);d.each(c[b]._get_settings().plugins,function(a,k){c[b].data[k]={}});d.each(c[b]._get_settings().plugins,function(a,k){h[k]&& h[k].__init.apply(c[b])});setTimeout(function(){c[b]&&c[b].init()},0)});return g};d.jstree={defaults:{plugins:[]},_focused:function(){return c[f]||null},_reference:function(a){if(c[a])return c[a];var b=d(a);!b.length&&"string"===typeof a&&(b=d("#"+a));return!b.length?null:c[b.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(a,c,b){this.data={core:{}};this.get_settings=function(){return d.extend(!0,{},b)};this._get_settings=function(){return b};this.get_index=function(){return a}; this.get_container=function(){return c};this.get_container_ul=function(){return c.children("ul:eq(0)")};this._set_settings=function(a){b=d.extend(!0,{},b,a)}},_fn:{},plugin:function(a,c){c=d.extend({},{__init:d.noop,__destroy:d.noop,_fn:{},defaults:!1},c);h[a]=c;d.jstree.defaults[a]=c.defaults;d.each(c._fn,function(c,b){b.plugin=a;b.old=d.jstree._fn[c];d.jstree._fn[c]=function(){var a,e=b,i=Array.prototype.slice.call(arguments);a=new d.Event("before.jstree");var f=!1;if(!(!0===this.data.core.locked&& "unlock"!==c&&"is_locked"!==c)){do{if(e&&e.plugin&&-1!==d.inArray(e.plugin,this._get_settings().plugins))break;e=e.old}while(e);if(e){if(0===c.indexOf("_"))a=e.apply(this,i);else{a=this.get_container().triggerHandler(a,{func:c,inst:this,args:i,plugin:e.plugin});if(!1===a)return;"undefined"!==typeof a&&(i=a);a=e.apply(d.extend({},this,{__callback:function(a){this.get_container().triggerHandler(c+".jstree",{inst:this,args:i,rslt:a,rlbk:f})},__rollback:function(){return f=this.get_rollback()},__call_old:function(a){return e.old.apply(this, a?Array.prototype.slice.call(arguments,1):i)}}),i)}return a}}};d.jstree._fn[c].old=b.old;d.jstree._fn[c].plugin=a})},rollback:function(a){a&&(d.isArray(a)||(a=[a]),d.each(a,function(a,b){c[b.i].set_rollback(b.h,b.d)}))}};d.jstree._fn=d.jstree._instance.prototype={};d(function(){var a=navigator.userAgent.toLowerCase(),c=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],b=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } "; if(/msie/.test(a)&&6==parseInt(c,10)){n=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(g){}b+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&& 7==parseInt(c,10)&&(b+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&/mozilla/.test(a)&&1.9>parseFloat(c,10)&&(b+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");d.vakata.css.add_sheet({str:b,title:"jstree"})});d.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open= this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+ this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",d.proxy(function(a){this.toggle_node(d(a.target))},this)).bind("mousedown.jstree",d.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(){var a;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection(); try{a.removeAllRanges(),a.collapse()}catch(c){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",d.proxy(function(a,c){var b=this._get_node(c.rslt.obj),g=this;-1===b&&(b=this.get_container_ul());b.length&&b.find("li").each(function(){var a=d(this);a.data("jstree")&&d.each(a.data("jstree"),function(c,b){g.data[c]&&d.isFunction(g["_"+c+"_notify"])&&g["_"+c+"_notify"].call(g,a,b)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree", d.proxy(function(a,c){var b=this._get_node(c.rslt.obj),g=this;-1===b&&(b=this.get_container_ul());b.length&&b.find("li.jstree-open:not(:has(ul))").each(function(){g.load_node(this,d.noop,d.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var a,b=this.get_index(),k=this._get_settings(),g=this;d.each(k.plugins,function(a,b){try{h[b].__destroy.apply(g)}catch(c){}});this.__callback();if(this.is_focused())for(a in c)if(c.hasOwnProperty(a)&& a!=b){c[a].set_focus();break}b===f&&(f=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});d(document).unbind(".jstree-"+b).undelegate(".jstree-"+b);c[b]=null;delete c[b]},_core_notify:function(a,b){b.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity", "0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g, "\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var b=this,c=!0,g=[],f=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=d.map(d.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=d.map(d.makeArray(this.data.core.to_load),function(a){return"#"+ a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(d.each(this.data.core.to_load,function(a,b){if(b=="#")return true;d(b).length?g.push(b):f.push(b)}),g.length&&(this.data.core.to_load=f,d.each(g,function(a,d){if(!b._is_loaded(d)){b.load_node(d,function(){b.reload_nodes(true)}, function(){b.reload_nodes(true)});c=false}})));this.data.core.to_open.length&&d.each(this.data.core.to_open,function(a,c){b.open_node(c,false,true)});c&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){b.__callback({},b)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&d.each(this.data.core.to_open,function(b,c){a.open_node(c,!1,!0)});this.__callback({})},refresh:function(a){var b=this; this.save_opened();a||(a=-1);(a=this._get_node(a))||(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){b.__callback({obj:a});b.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=d.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");f=this.get_index();this.__callback()}},is_focused:function(){return f==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"), f=-1);this.__callback()},_get_node:function(a){var b=d(a,this.get_container());if(b.is(".jstree")||-1==a)return-1;b=b.closest("li",this.get_container());return b.length?b:!1},_get_next:function(a,b){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:first-child"):!a.length?!1:b?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0)},_get_prev:function(a, b){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(b)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var c=a.parentsUntil(".jstree","li:eq(0)");return c.length?c:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:-1}, _get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):!a.length?!1:a.children("ul:eq(0)").children("li")},get_path:function(a,b){var c=[],d=this,a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){c.push(b?this.id:d.get_text(this))});c.reverse();c.push(b?a.attr("id"):this.get_text(a));return c},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a= this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,b,c){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return b&& b.call(),!1;var d=c||n?0:this._get_settings().core.animation,f=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){f.open_node(this,!1,!0)}),d&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),d?a.children("ul").stop(!0,!0).slideDown(d,function(){this.style.display="";f.after_open(a)}):f.after_open(a),this.__callback({obj:a}),b&&b.call()): (a.children("a").addClass("jstree-loading"),this.load_node(a,function(){f.open_node(a,b,c)},b))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,b){var a=this._get_node(a),c=b||n?0:this._get_settings().core.animation,d=this;if(!a.length||!a.hasClass("jstree-open"))return!1;c&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");c?a.children("ul").stop(!0,!0).slideUp(c,function(){this.style.display="";d.after_close(a)}): d.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,b,c){a=a?this._get_node(a):-1;if(!a||-1===a)a=this.get_container_ul();c?a=a.find("li.jstree-closed"):(c=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").andSelf():a.find("li.jstree-closed"));var d=this;a.each(function(){var a=this; d._is_loaded(this)?d.open_node(this,false,!b):d.open_node(this,function(){d.open_all(a,b,c)},!b)});0===c.find("li.jstree-closed").length&&this.__callback({obj:c})},close_all:function(a,b){var c=this,a=a?this._get_node(a):this.get_container();if(!a||-1===a)a=this.get_container_ul();a.find("li.jstree-open").andSelf().each(function(){c.close_node(this,!b)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?d(a):this.get_container_ul();a=a.is("li")?a.find("li").andSelf():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"); a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,b){this.get_container().empty().append(a);this.data=b;this.__callback()},load_node:function(a){this.__callback({obj:a})},_is_loaded:function(){return!0},create_node:function(a,b,c,f,h){var a=this._get_node(a),b="undefined"===typeof b?"last": b,e=d("<li />"),l=this._get_settings().core,j;if(-1!==a&&!a.length)return!1;if(!h&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,b,c,f,!0)}),!1;this.__rollback();"string"===typeof c&&(c={data:c});c||(c={});c.attr&&e.attr(c.attr);c.metadata&&e.data(c.metadata);c.state&&e.addClass("jstree-"+c.state);c.data||(c.data=this._get_string("new_node"));d.isArray(c.data)||(j=c.data,c.data=[],c.data.push(j));d.each(c.data,function(a,b){j=d("<a />");d.isFunction(b)&&(b=b.call(this, c));if(typeof b=="string")j.attr("href","#")[l.html_titles?"html":"text"](b);else{if(!b.attr)b.attr={};if(!b.attr.href)b.attr.href="#";j.attr(b.attr)[l.html_titles?"html":"text"](b.title);b.language&&j.addClass(b.language)}j.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!b.icon&&c.icon)b.icon=c.icon;b.icon&&(b.icon.indexOf("/")===-1?j.children("ins").addClass(b.icon):j.children("ins").css("background","url('"+b.icon+"') center center no-repeat"));e.append(j)});e.prepend("<ins class='jstree-icon'>&#160;</ins>"); -1===a&&(a=this.get_container(),"before"===b&&(b="first"),"after"===b&&(b="last"));switch(b){case "before":a.before(e);j=this._get_parent(a);break;case "after":a.after(e);j=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(e);j=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(e);j=a;break;default:a.children("ul").length||a.append("<ul />"),b||(b=0),j=a.children("ul").children("li").eq(b), j.length?j.before(e):a.children("ul").append(e),j=a}if(-1===j||j.get(0)===this.get_container().get(0))j=-1;this.clean_node(j);this.__callback({obj:e,parent:j});f&&f.call(this,e);return e},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var b=this._get_settings().core.html_titles,a=a.children("a:eq(0)");if(b)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,b){a=this._get_node(a); if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var c=a.children("INS").clone();a.html(b).prepend(c);this.__callback({obj:a,name:b});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:b});return a.nodeValue=b},rename_node:function(a,b){a=this._get_node(a);this.__rollback();a&&a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:a,name:b})},delete_node:function(a){a=this._get_node(a); if(!a.length)return!1;this.__rollback();var b=this._get_parent(a),c=d([]),f=this;a.each(function(){c=c.add(f._get_prev(this))});a=a.detach();-1!==b&&0===b.find("> ul > li").length&&b.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(b);this.__callback({obj:a,prev:c,parent:b});return a},prepare_move:function(a,c,k,f,h){var e={};e.ot=d.jstree._reference(a)||this;e.o=e.ot._get_node(a);e.r=-1===c?-1:this._get_node(c);e.p="undefined"===typeof k||!1===k?"last":k;if(h||!b.o|| !(b.o[0]===e.o[0]&&b.r[0]===e.r[0]&&b.p===e.p)){e.ot=d.jstree._reference(e.o)||this;e.rt=d.jstree._reference(e.r)||this;if(-1===e.r||!e.r)switch(e.cr=-1,e.p){case "first":case "before":case "inside":e.cp=0;break;case "after":case "last":e.cp=e.rt.get_container().find(" > ul > li").length;break;default:e.cp=e.p}else{if(!/^(before|after)$/.test(e.p)&&!this._is_loaded(e.r))return this.load_node(e.r,function(){this.prepare_move(a,c,k,f,!0)});switch(e.p){case "before":e.cp=e.r.index();e.cr=e.rt._get_parent(e.r); break;case "after":e.cp=e.r.index()+1;e.cr=e.rt._get_parent(e.r);break;case "inside":case "first":e.cp=0;e.cr=e.r;break;case "last":e.cp=e.r.find(" > ul > li").length;e.cr=e.r;break;default:e.cp=e.p,e.cr=e.r}}e.np=-1==e.cr?e.rt.get_container():e.cr;e.op=e.ot._get_parent(e.o);e.cop=e.o.index();-1===e.op&&(e.op=e.ot?e.ot.get_container():this.get_container());!/^(before|after)$/.test(e.p)&&e.op&&e.np&&e.op[0]===e.np[0]&&e.o.index()<e.cp&&e.cp++;e.or=e.np.find(" > ul > li:nth-child("+(e.cp+1)+")");b= e}this.__callback(b);f&&f.call(this,b)},check_move:function(){var a=b,c=!0,d=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0]||a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==d.parentsUntil(".jstree","li").andSelf().index(this))return c=!1});return c},move_node:function(a,c,f,g,h,e){if(!h)return this.prepare_move(a,c,f,function(a){this.move_node(a,!1,!1,g,!0,e)});g&&(b.cy=!0);if(!e&&!this.check_move())return!1;this.__rollback();c=!1;g?(c=a.o.clone(!0), c.find("*[id]").andSelf().each(function(){if(this.id)this.id="copy_"+this.id})):c=a.o;a.or.length?a.or.before(c):(a.np.children("ul").length||d("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(c));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(l){}g&&(b.cy=!0,b.oc=c);this.__callback(b);return b},_get_move:function(){return b}}})})(jQuery);(function(d){var c, f,h;d(function(){/msie/.test(navigator.userAgent.toLowerCase())?(f=d('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),h=d('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),c=f.width()-h.width(),f.add(h).remove()):(f=d("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%", height:200}),c=100-f.width(),f.parent().remove())});d.jstree.plugin("ui",{__init:function(){this.data.ui.selected=d();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",d.proxy(function(b){b.preventDefault();b.currentTarget.blur();d(b.currentTarget).hasClass("jstree-loading")||this.select_node(b.currentTarget,!0,b)},this)).delegate("a","mouseenter.jstree",d.proxy(function(b){d(b.currentTarget).hasClass("jstree-loading")|| this.hover_node(b.target)},this)).delegate("a","mouseleave.jstree",d.proxy(function(b){d(b.currentTarget).hasClass("jstree-loading")||this.dehover_node(b.target)},this)).bind("reopen.jstree",d.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",d.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",d.proxy(function(){this.reselect()},this)).bind("close_node.jstree",d.proxy(function(b,a){var c=this._get_settings().ui,f=this._get_node(a.rslt.obj), g=f&&f.length?f.children("ul").find("a.jstree-clicked"):d(),h=this;!1!==c.selected_parent_close&&g.length&&g.each(function(){h.deselect_node(this);"select_parent"===c.selected_parent_close&&h.select_node(f)})},this)).bind("delete_node.jstree",d.proxy(function(b,a){var c=this._get_settings().ui.select_prev_on_delete,d=this._get_node(a.rslt.obj),d=d&&d.length?d.find("a.jstree-clicked"):[],f=this;d.each(function(){f.deselect_node(this)});c&&d.length&&a.rslt.prev.each(function(){if(this.parentNode)return f.select_node(this), !1})},this)).bind("move_node.jstree",d.proxy(function(b,a){a.rslt.cy&&a.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(b,a){if("undefined"===typeof b||null===b)return a?this.data.ui.selected:this.data.ui.last_selected;var c=d(b, this.get_container());if(c.is(".jstree")||-1==b)return-1;c=c.closest("li",this.get_container());return c.length?c:!1},_ui_notify:function(b,a){a.selected&&this.select_node(b,!1)},save_selected:function(){var b=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&b.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)}, reselect:function(){var b=this,a=this.data.ui.to_select,a=d.map(d.makeArray(a),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});d.each(a,function(a,c){c&&"#"!==c&&b.select_node(c)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(){this.save_selected();return this.__call_old()},hover_node:function(b){b=this._get_node(b); if(!b.length)return!1;b.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=b.children("a").addClass("jstree-hovered").parent();this._fix_scroll(b);this.__callback({obj:b})},dehover_node:function(){var b=this.data.ui.hovered;if(!b||!b.length)return!1;this.data.ui.hovered[0]===b.children("a").removeClass("jstree-hovered").parent()[0]&&(this.data.ui.hovered=null);this.__callback({obj:b})},select_node:function(b,a,c){b=this._get_node(b);if(-1==b||!b||!b.length)return!1;var d=this._get_settings().ui, f="on"==d.select_multiple_modifier||!1!==d.select_multiple_modifier&&c&&c[d.select_multiple_modifier+"Key"],h=!1!==d.select_range_modifier&&c&&c[d.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==b[0]&&this.data.ui.last_selected.parent()[0]===b.parent()[0],e=this.is_selected(b),l=!0,j=this;if(a){if(d.disable_selecting_children&&f&&(b.parentsUntil(".jstree","li").children("a.jstree-clicked").length||b.children("ul").find("a.jstree-clicked:eq(0)").length))return!1; l=!1;switch(!0){case h:this.data.ui.last_selected.addClass("jstree-last-selected");b=b[b.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();-1==d.select_limit||b.length<d.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==j.data.ui.last_selected[0]&&j.deselect_node(this)}),e=!1,l=!0):l=!1;break;case e&&!f:this.deselect_all();e=!1;l=!0;break;case !e&&!f:if(-1==d.select_limit|| 0<d.select_limit)this.deselect_all(),l=!0;break;case e&&f:this.deselect_node(b);break;case !e&&f:if(-1==d.select_limit||this.data.ui.selected.length+1<=d.select_limit)l=!0}}l&&!e&&(h||(this.data.ui.last_selected=b),b.children("a").addClass("jstree-clicked"),d.selected_parent_open&&b.parents(".jstree-closed").each(function(){j.open_node(this,false,true)}),this.data.ui.selected=this.data.ui.selected.add(b),this._fix_scroll(b.eq(0)),this.__callback({obj:b,e:c}))},_fix_scroll:function(b){var a=this.get_container()[0]; if(a.scrollHeight>a.offsetHeight&&(b=this._get_node(b))&&!(-1===b||!b.length||!b.is(":visible")))if(b=b.offset().top-this.get_container().offset().top,0>b&&(a.scrollTop=a.scrollTop+b-1),b+this.data.core.li_height+(a.scrollWidth>a.offsetWidth?c:0)>a.offsetHeight)a.scrollTop+=b-a.offsetHeight+this.data.core.li_height+1+(a.scrollWidth>a.offsetWidth?c:0)},deselect_node:function(b){b=this._get_node(b);if(!b.length)return!1;this.is_selected(b)&&(b.children("a").removeClass("jstree-clicked"),this.data.ui.selected= this.data.ui.selected.not(b),this.data.ui.last_selected.get(0)===b.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:b}))},toggle_select:function(b){b=this._get_node(b);if(!b.length)return!1;this.is_selected(b)?this.deselect_node(b):this.select_node(b)},is_selected:function(b){return 0<=this.data.ui.selected.index(this._get_node(b))},get_selected:function(b){return b?d(b).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(b){b=b?d(b).find("a.jstree-clicked").parent(): this.get_container().find("a.jstree-clicked").parent();b.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=d([]);this.data.ui.last_selected=!1;this.__callback({obj:b})}}});d.jstree.defaults.plugins.push("ui")})(jQuery);(function(d){var c=[];d.jstree._themes=!1;d.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",d.proxy(function(){var c=this._get_settings().themes;this.data.themes.dots=c.dots;this.data.themes.icons=c.icons;this.set_theme(c.theme, c.url)},this)).bind("loaded.jstree",d.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(f,h){if(!f)return!1;h||(h=d.jstree._themes+f+"/style.css");-1==d.inArray(h,c)&&(d.vakata.css.add_sheet({url:h}),c.push(h));this.data.themes.theme!=f&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=f);this.get_container().addClass("jstree-"+ f);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons= !0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});d(function(){!1===d.jstree._themes&&d("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return d.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/", !1});!1===d.jstree._themes&&(d.jstree._themes="themes/")});d.jstree.defaults.plugins.push("themes")})(jQuery);(function(d){d.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(c,d){d.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(c,d,h){var b=this;this.load_node_json(c,function(){b.__callback({obj:b._get_node(c)}); d.call(this)},h)},_is_loaded:function(c){var f=this._get_settings().json_data,c=this._get_node(c);return-1==c||!c||!f.ajax&&!f.progressive_render&&!d.isFunction(f.data)||c.is(".jstree-open, .jstree-leaf")||0<c.children("ul").children("li").length},refresh:function(c){var c=this._get_node(c),f=this._get_settings().json_data;c&&-1!==c&&f.progressive_unload&&(d.isFunction(f.data)||f.ajax)&&c.removeData("jstree_children");return this.__call_old()},load_node_json:function(c,f,h){var b=this.get_settings().json_data, a,i=function(){};if((c=this._get_node(c))&&-1!==c&&(b.progressive_render||b.progressive_unload)&&!c.is(".jstree-open, .jstree-leaf")&&0===c.children("ul").children("li").length&&c.data("jstree_children")){if(a=this._parse_json(c.data("jstree_children"),c))c.append(a),b.progressive_unload||c.removeData("jstree_children");this.clean_node(c);f&&f.call(this)}else{if(c&&-1!==c){if(c.data("jstree_is_loading"))return;c.data("jstree_is_loading",!0)}switch(!0){case !b.data&&!b.ajax:throw"Neither data nor ajax settings supplied."; case d.isFunction(b.data):b.data.call(this,c,d.proxy(function(a){if(a=this._parse_json(a,c)){if(c===-1||!c)this.get_container().children("ul").empty().append(a.children());else{c.append(a).children("a.jstree-loading").removeClass("jstree-loading");c.removeData("jstree_is_loading")}this.clean_node(c);f&&f.call(this)}else{if(c===-1||!c)b.correct_state&&this.get_container().children("ul").empty();else{c.children("a.jstree-loading").removeClass("jstree-loading");c.removeData("jstree_is_loading");b.correct_state&& this.correct_state(c)}h&&h.call(this)}},this));break;case !!b.data&&!b.ajax||!!b.data&&!!b.ajax&&(!c||-1===c):if(!c||-1==c)(a=this._parse_json(b.data,c))?(this.get_container().children("ul").empty().append(a.children()),this.clean_node()):b.correct_state&&this.get_container().children("ul").empty();f&&f.call(this);break;case !b.data&&!!b.ajax||!!b.data&&!!b.ajax&&c&&-1!==c:i=function(a,d,f){var e=this.get_settings().json_data.ajax.error;e&&e.call(this,a,d,f);if(c!=-1&&c.length){c.children("a.jstree-loading").removeClass("jstree-loading"); c.removeData("jstree_is_loading");d==="success"&&b.correct_state&&this.correct_state(c)}else d==="success"&&b.correct_state&&this.get_container().children("ul").empty();h&&h.call(this)},b.ajax.context=this,b.ajax.error=i,b.ajax.success=function(a,g,h){var e=this.get_settings().json_data.ajax.success;e&&(a=e.call(this,a,g,h)||a);if(a===""||a&&a.toString&&a.toString().replace(/^[\s\n]+$/,"")===""||!d.isArray(a)&&!d.isPlainObject(a))return i.call(this,h,g,"");if(a=this._parse_json(a,c)){if(c===-1||!c)this.get_container().children("ul").empty().append(a.children()); else{c.append(a).children("a.jstree-loading").removeClass("jstree-loading");c.removeData("jstree_is_loading")}this.clean_node(c);f&&f.call(this)}else if(c===-1||!c){if(b.correct_state){this.get_container().children("ul").empty();f&&f.call(this)}}else{c.children("a.jstree-loading").removeClass("jstree-loading");c.removeData("jstree_is_loading");if(b.correct_state){this.correct_state(c);f&&f.call(this)}}},b.ajax.dataType||(b.ajax.dataType="json"),d.isFunction(b.ajax.url)&&(b.ajax.url=b.ajax.url.call(this, c)),d.isFunction(b.ajax.data)&&(b.ajax.data=b.ajax.data.call(this,c)),d.ajax(b.ajax)}}},_parse_json:function(c,f,h){var b=!1,a=this._get_settings(),i=a.json_data,k=a.core.html_titles,g;if(!c)return b;i.progressive_unload&&f&&-1!==f&&f.data("jstree_children",b);if(d.isArray(c)){b=d();if(!c.length)return!1;a=0;for(i=c.length;a<i;a++)g=this._parse_json(c[a],f,!0),g.length&&(b=b.add(g))}else{"string"==typeof c&&(c={data:c});if(!c.data&&""!==c.data)return b;b=d("<li />");c.attr&&b.attr(c.attr);c.metadata&& b.data(c.metadata);c.state&&b.addClass("jstree-"+c.state);d.isArray(c.data)||(g=c.data,c.data=[],c.data.push(g));d.each(c.data,function(a,e){g=d("<a />");d.isFunction(e)&&(e=e.call(this,c));if(typeof e=="string")g.attr("href","#")[k?"html":"text"](e);else{if(!e.attr)e.attr={};if(!e.attr.href)e.attr.href="#";g.attr(e.attr)[k?"html":"text"](e.title);e.language&&g.addClass(e.language)}g.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!e.icon&&c.icon)e.icon=c.icon;e.icon&&(e.icon.indexOf("/")===-1? g.children("ins").addClass(e.icon):g.children("ins").css("background","url('"+e.icon+"') center center no-repeat"));b.append(g)});b.prepend("<ins class='jstree-icon'>&#160;</ins>");c.children&&(i.progressive_render&&"open"!==c.state?b.addClass("jstree-closed").data("jstree_children",c.children):(i.progressive_unload&&b.data("jstree_children",c.children),d.isArray(c.children)&&c.children.length&&(g=this._parse_json(c.children,f,!0),g.length&&(f=d("<ul />"),f.append(g),b.append(f)))))}h||(h=d("<ul />"), h.append(b),b=h);return b},get_json:function(c,f,h,b){var a=[],i=this._get_settings(),k=this,g,m,e,l,j,n,c=this._get_node(c);if(!c||-1===c)c=this.get_container().find("> ul > li");f=d.isArray(f)?f:["id","class"];!b&&this.data.types&&f.push(i.types.type_attr);h=d.isArray(h)?h:[];c.each(function(){e=d(this);g={data:[]};f.length&&(g.attr={});d.each(f,function(a,b){(m=e.attr(b))&&m.length&&m.replace(/jstree[^ ]*/ig,"").length&&(g.attr[b]=(" "+m).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /, "").replace(/ $/,""))});e.hasClass("jstree-open")&&(g.state="open");e.hasClass("jstree-closed")&&(g.state="closed");e.data()&&(g.metadata=e.data());l=e.children("a");l.each(function(){j=d(this);if(h.length||d.inArray("languages",i.plugins)!==-1||j.children("ins").get(0).style.backgroundImage.length||j.children("ins").get(0).className&&j.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length){n=false;d.inArray("languages",i.plugins)!==-1&&d.isArray(i.languages)&&i.languages.length&& d.each(i.languages,function(a,b){if(j.hasClass(b)){n=b;return false}});m={attr:{},title:k.get_text(j,n)};d.each(h,function(a,b){m.attr[b]=(" "+(j.attr(b)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")});d.inArray("languages",i.plugins)!==-1&&d.isArray(i.languages)&&i.languages.length&&d.each(i.languages,function(a,b){if(j.hasClass(b)){m.language=b;return true}});if(j.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length)m.icon= j.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");if(j.children("ins").get(0).style.backgroundImage.length)m.icon=j.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")}else m=k.get_text(j);l.length>1?g.data.push(m):g.data=m});e=e.find("> ul > li");e.length&&(g.children=k.get_json(e,f,h,!0));a.push(g)});return a}}})})(jQuery);(function(d){d.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html= this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(c,d,h){var b=this;this.load_node_html(c,function(){b.__callback({obj:b._get_node(c)});d.call(this)},h)},_is_loaded:function(c){c=this._get_node(c);return-1==c||!c||!this._get_settings().html_data.ajax&&!d.isFunction(this._get_settings().html_data.data)|| c.is(".jstree-open, .jstree-leaf")||0<c.children("ul").children("li").size()},load_node_html:function(c,f,h){var b,a=this.get_settings().html_data,i=function(){};if((c=this._get_node(c))&&-1!==c){if(c.data("jstree_is_loading"))return;c.data("jstree_is_loading",!0)}switch(!0){case d.isFunction(a.data):a.data.call(this,c,d.proxy(function(b){if(b&&b!==""&&b.toString&&b.toString().replace(/^[\s\n]+$/,"")!==""){b=d(b);b.is("ul")||(b=d("<ul />").append(b));if(c==-1||!c)this.get_container().children("ul").empty().append(b.children()).find("li, a").filter(function(){return!this.firstChild|| !this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");else{c.children("a.jstree-loading").removeClass("jstree-loading");c.append(b).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"); c.removeData("jstree_is_loading")}this.clean_node(c);f&&f.call(this)}else if(c&&c!==-1){c.children("a.jstree-loading").removeClass("jstree-loading");c.removeData("jstree_is_loading");if(a.correct_state){this.correct_state(c);f&&f.call(this)}}else if(a.correct_state){this.get_container().children("ul").empty();f&&f.call(this)}},this));break;case !a.data&&!a.ajax:if(!c||-1==c)this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild|| !this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();f&&f.call(this);break;case !!a.data&&!a.ajax||!!a.data&&!!a.ajax&&(!c||-1===c):if(!c||-1==c)b=d(a.data),b.is("ul")||(b=d("<ul />").append(b)),this.get_container().children("ul").empty().append(b.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName|| this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();f&&f.call(this);break;case !a.data&&!!a.ajax||!!a.data&&!!a.ajax&&c&&-1!==c:c=this._get_node(c),i=function(b,d,f){var e=this.get_settings().html_data.ajax.error;e&&e.call(this,b,d,f);if(c!=-1&&c.length){c.children("a.jstree-loading").removeClass("jstree-loading");c.removeData("jstree_is_loading");d==="success"&& a.correct_state&&this.correct_state(c)}else d==="success"&&a.correct_state&&this.get_container().children("ul").empty();h&&h.call(this)},a.ajax.context=this,a.ajax.error=i,a.ajax.success=function(b,g,h){var e=this.get_settings().html_data.ajax.success;e&&(b=e.call(this,b,g,h)||b);if(b===""||b&&b.toString&&b.toString().replace(/^[\s\n]+$/,"")==="")return i.call(this,h,g,"");if(b){b=d(b);b.is("ul")||(b=d("<ul />").append(b));if(c==-1||!c)this.get_container().children("ul").empty().append(b.children()).find("li, a").filter(function(){return!this.firstChild|| !this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");else{c.children("a.jstree-loading").removeClass("jstree-loading");c.append(b).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"); c.removeData("jstree_is_loading")}this.clean_node(c);f&&f.call(this)}else if(c&&c!==-1){c.children("a.jstree-loading").removeClass("jstree-loading");c.removeData("jstree_is_loading");if(a.correct_state){this.correct_state(c);f&&f.call(this)}}else if(a.correct_state){this.get_container().children("ul").empty();f&&f.call(this)}},a.ajax.dataType||(a.ajax.dataType="html"),d.isFunction(a.ajax.url)&&(a.ajax.url=a.ajax.url.call(this,c)),d.isFunction(a.ajax.data)&&(a.ajax.data=a.ajax.data.call(this,c)),d.ajax(a.ajax)}}}}); d.jstree.defaults.plugins.push("html_data")})(jQuery)}})();
